<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_partner_form_account_inherit" model="ir.ui.view">
        <field name="name">res.partner.form.account.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <!-- Agregar botones en el header -->
            <xpath expr="//sheet" position="before">
                <header>
                    <button name="action_view_account_statement" 
                            type="object" 
                            string="Ver Estado de Cuenta (LV)" 
                            class="btn-primary"
                            invisible="customer_rank == 0"/>
                    <button name="action_register_payment" 
                            type="object" 
                            string="Registrar Pago (LV)" 
                            class="btn-secondary"
                            invisible="customer_rank == 0 or account_balance &lt;= 0"/>
                </header>
            </xpath>
            
            <!-- Agregar campos en la pestaÃ±a de ventas -->
            <xpath expr="//page[@name='sales_purchases']//group[@name='sale']" position="inside">
                <field name="account_credit_limit"/>
                <field name="account_balance" widget="monetary" 
                       decoration-danger="account_balance > 0"
                       decoration-success="account_balance &lt;= 0"/>
            </xpath>
            
            <!-- Agregar pestaÃ±a de cuenta corriente -->
            <xpath expr="//notebook" position="inside">
                <page string="Cuenta Corriente (LV)" invisible="customer_rank == 0">
                    <group>
                        <group>
                            <field name="account_balance" widget="monetary"/>
                            <field name="account_credit_limit" widget="monetary"/>
                        </group>
                    </group>
                    <field name="account_move_ids" readonly="1">
                        <list>
                            <field name="date"/>
                            <field name="description"/>
                            <field name="debit" sum="Total"/>
                            <field name="credit" sum="Total"/>
                            <field name="balance"/>
                            <field name="state" widget="badge"/>
                        </list>
                    </field>
                </page>
            </xpath>
        </field>
    </record>
</odoo>
